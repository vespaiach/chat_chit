<%= render 'shares/modal_dialog', id: 'update-profile-modal', title: 'Edit Profile' do %>
<%= form_with(model: @user, url: profile_path(@user), data: { controller: 'profile-form', action: 'submit->profile-form#validate' }, class: 'flex flex-col items-stretch gap-4') do |form| %>
<div class="space-y-1 flex gap-2 items-center">
  <div class="w-20 h-20 rounded-full overflow-hidden border border-gray-300">
    <% if @user.avatar.attached? %>
    <%= image_tag url_for(@user.avatar), alt: "Profile Avatar", class: "w-full h-full object-cover", id: "avatar-preview" %>
    <% else %>
    <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-500" id="avatar-placeholder">
      No Image
    </div>
    <img src="#" alt="Profile Avatar Preview" class="w-full h-full object-cover hidden" id="avatar-preview">
    <% end %>
  </div>
  <%= form.label :avatar, "Change", class: "cursor-pointer hover:text-blue-700 py-2 px-4" %>
  <%= form.file_field :avatar, class: "hidden", accept: "image/*", data: { profile_form_target: "avatarInput", action: "change->profile-form#previewAvatar" } %>
</div>

<div class="space-y-1">
  <label for="first_name" class="block">First Name</label>
  <%= form.text_field :first_name, id: "first_name", class: "text-input", placeholder: "Enter your first name", maxlength: 50, data: { profile_form_target: 'firstName' } %>
  <div id="user-first-name-error" class="text-red-500 text-xs invisible" data-profile-form-target="firstNameError">First name is
    required.</div>
</div>

<div class="space-y-1">
  <label for="last_name" class="block">Last Name</label>
  <%= form.text_field :last_name, id: "last_name", class: "text-input", placeholder: "Enter your last name", maxlength: 50, data: { profile_form_target: 'lastName' } %>
  <div id="user-last-name-error" class="text-red-500 text-xs invisible" data-profile-form-target="lastNameError">Last name is
    required.</div>
</div>

<div class="space-y-3 w-full">
  <%= form.submit 'Save', class: 'primary-button w-full' %>
</div>
<% end %>
<% end %>